package com.spacecombat.game;

import com.spacecombat.Component;
import com.spacecombat.GameObject;
import com.spacecombat.ai.AIPlayerEndLevel;

public class LoadLevelOnCollision extends Component {

	private boolean isFired;
	private final String level;

	public LoadLevelOnCollision (final String level) 
	{
		this.isFired = false;
		this.level = level;
	}

	@Override
	public void  collide (final GameObject whatIHit)
	{
		if (whatIHit.getName().equals("TopOfScreen"))
		{
			if (this.isFired)
			{
				return;
			}
			this.isFired = true;

			GameObject player = GameObject.findByName("player");
			player.addComponent(new AIPlayerEndLevel((PlayerInput)player.getComponent(PlayerInput.class), (HealthController)player.getComponent(HealthController.class), level));
			//LevelLoader.loadLevel(this.level,false);
		}
	}
}
